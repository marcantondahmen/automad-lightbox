/*!
 *	Automad/Lightbox
 *	Copyright (c) 2020 by Marc Anton Dahmen
 *	https://marcdahmen.de
 *	Licensed under the MIT license.
 */
!function(u){u.fn.AutomadLightbox=function(){var n,a,t,o,g,d,h,i,e,c,p,f=u(this);0<f.length&&(n=u('<div class="automad-lightbox"></div>').appendTo("body").hide(),a=u('<div class="caption"></div>').appendTo(n),t=u('<div class="caption-text"></div>').appendTo(a),e=u('<a class="close" href="#"></a>').appendTo(n),o=!1,displayCaption=function(i){t.html(i),a.fadeIn(300)},e.click(function(){return n.fadeOut(300,function(){bigImage.remove()}),o=!1}),1<f.length&&(i=u('<a class="prev" href="#"></a>'
).appendTo(n),e=u('<a class="next" href="#"></a>').appendTo(n),i.click(function(){return 0<h?--h:h=f.length-1,p(h),!1}),e.click(function(){return f.length>h+1?h+=1:h=0,p(h),!1})),c=function(){var i=bigImage.width(),t=bigImage.height(),e=n.height()/n.width(),a=t/i;(g>n.width()||d>n.height())&&(a<e?t=(i=n.width())*a:i=(t=n.height())/a),bigTop=n.height()-t!=0?(n.height()-t)/2+"px":0,bigLeft=n.width()-i!=0?(n.width()-i)/2+"px":0,bigImage.css({width:i+"px",height:t+"px",top:bigTop,left:bigLeft}),
bigImage.fadeIn(300)},f.each(function(i){var t=u(this),e=t.attr("href"),a=t.data("caption");t.click(function(){return h=i,bigImage=u('<img alt="">').appendTo(n).hide().one("load",function(){g=bigImage.width(),d=bigImage.height(),c(),displayCaption(a),o=!0}).attr("src",e),n.fadeIn(300),!1})}),p=function(i){var t=f.eq(i).attr("href"),e=f.eq(i).data("caption");bigImage.fadeOut(200),a.fadeOut(200),setTimeout(function(){bigImage.remove(),bigImage=u('<img alt="">').appendTo(n).hide().one("load",
function(){g=bigImage.width(),d=bigImage.height(),c(),displayCaption(e)}).attr("src",t)},200)},u(window).resize(function(){o&&c()}))},u(document).ready(function(){u(".automad-lightbox-item").AutomadLightbox()})}(jQuery);